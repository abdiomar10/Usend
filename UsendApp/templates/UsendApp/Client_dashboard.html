{% extends "UsendApp/base.html" %}

{% block title %}Client Dashboard{% endblock %}

{% block content %}
<h2 class="text-xl mb-4">Client Dashboard</h2>
<a href="{% url 'post_task' %}" class="bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded">Post a New Task</a>

<h3 class="text-lg mt-4 mb-2">Your Tasks</h3>
<ul>
    {% for task in tasks %}
    <li>
        <strong>{{ task.title }}</strong><br>
        {{ task.description }}<br>
        From: {{ task.location_from }} to {{ task.location_to }}<br>
        Contact: {{ task.phone_number }}<br>
        {% if task.proposed_price %}
            Proposed Price: ${{ task.proposed_price }}<br>
            {% if task.status == 'Pending Client Approval' %}
                <a href="{% url 'accept_task' task.id 'accept' %}" class="text-green-500 hover:text-green-700 font-bold">Accept</a> |
                <a href="{% url 'accept_task' task.id 'decline' %}" class="text-red-500 hover:text-red-700 font-bold">Decline</a>
            {% elif task.status == 'In Progress' %}
                Status: In Progress
            {% elif task.status == 'Completed' %}
                Status: Completed
                <a href="{% url 'pay_runner' task.id %}" class="bg-blue-500 hover:bg-blue-700 text-white font-bold py-1 px-4 rounded">Pay Runner</a>
            {% endif %}
        {% else %}
            Waiting for runner to propose price...
        {% endif %}
    </li>
    <hr>
    {% endfor %}
</ul>
{% endblock %}
